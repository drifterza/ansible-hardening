---
env: prod
datacenter: eu-west
nexus_delete_default_repos: true
nexus_delete_default_blobstore: true
nexus_anonymous_access: false
nexus_audit_enabled: true
nexus_timezone: "UTC"
#nexus_download_url: "http://download.sonatype.com/nexus/3"
nexus_download_dir: "/var/tmp"
nexus_data_dir: "/data/nexus"
nexus_min_heap_size: "1200M"
nexus_max_heap_size: "{{ nexus_min_heap_size }}"
nexus_max_direct_memory: "6G"
nexus_public_hostname: "registry.fanmode.com"
nexus_public_scheme: https
nexus_api_scheme: http
nexus_docker_hosted_port: 5000
nexus_docker_proxy_port: 5001
nexus_docker_group_port: 5002
nexus_config_pypi: true
nexus_config_docker: true
nexus_config_raw: true
nexus_config_rubygems: true
nexus_config_bower: true
nexus_config_npm: true
nexus_config_gitlfs: true
nexus_backup_configure: true
nexus_backup_cron: "0 0 21 * * ?"
nexus_backup_dir: "/backup/nexus"
nexus_restore_log: "{{ nexus_backup_dir }}/nexus-restore.log"
nexus_backup_rotate: true
nexus_backup_rotate_first: false
nexus_email_server_enabled: false
httpd_default_admin_email: "admin@fanmode.com"
httpd_setup_enable: false
httpd_ssl_cert_file: "/etc/letsencrypt/live/registry.fanmode.com/cert.pem"
httpd_ssl_cert_key: "/etc/letsencrypt/live/registry.fanmode.com/privkey.pem"
httpd_ssl_cert_chain_file: "/etc/letsencrypt/live/registry.fanmode.com/chain.pem"
httpd_copy_ssl_files: false
nexus_backup_keep_rotations: 4
nexus_scheduled_tasks:
  - name: compact-docker-blobstore
    cron: '0 0 22 * * ?'
    typeId: blobstore.compact
    task_alert_email: donovanf@fanmode.com
    taskProperties:
      blobstoreName: "{{ nexus_blob_names.docker.blob }}"
  - name: Purge-maven-snapshots
    cron: '0 50 23 * * ?'
    typeId: repository.maven.remove-snapshots
    task_alert_email: donovanf@fanmode.com
    taskProperties:
      repositoryName: "*"
      minimumRetained: "2"
      snapshotRetentionDays: "2"
      gracePeriodInDays: "2"
    booleanTaskProperties:
      removeIfReleased: true
  - name: Purge unused docker manifests and images
    cron: '0 55 23 * * ?'
    typeId: "repository.docker.gc"
    task_alert_email: donovanf@fanmode.com
    taskProperties:
      repositoryName: "*"
     